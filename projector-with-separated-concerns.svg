<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1322px" preserveAspectRatio="none" style="width:1417px;height:1322px;background:#FFFFFF;" version="1.1" viewBox="0 0 1417 1322" width="1417px" zoomAndPan="magnify"><defs/><g><g><title>ConcertEventStore</title><rect fill="#FFFFFF" height="1093.1113" style="stroke:#181818;stroke-width:1;" width="10" x="307.5488" y="142.1094"/></g><g><title>Projection Updater</title><rect fill="#FFFFFF" height="929.9375" style="stroke:#181818;stroke-width:1;" width="10" x="527.4917" y="305.2832"/></g><g><title>Concert Sales Projector</title><rect fill="#FFFFFF" height="1034.4902" style="stroke:#181818;stroke-width:1;" width="10" x="838.9487" y="200.7305"/></g><g><title>ConcertSalesProjectionRepository</title><rect fill="#FFFFFF" height="1157.7324" style="stroke:#181818;stroke-width:1;" width="10" x="1050.9702" y="77.4883"/></g><g><title>ProjectionMetadataRepository</title><rect fill="#FFFFFF" height="1157.7324" style="stroke:#181818;stroke-width:1;" width="10" x="1281.7144" y="77.4883"/></g><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:1.5;" width="948.4458" x="452.4336" y="378.9043"/><rect fill="none" height="193.1738" style="stroke:#000000;stroke-width:1.5;" width="948.4458" x="452.4336" y="638.0098"/><rect fill="none" height="59.6211" style="stroke:#000000;stroke-width:1.5;" width="337.2603" x="452.4336" y="1138.2891"/><g><title>SpringAppConfig</title><rect fill="#000000" fill-opacity="0.00000" height="1176.7324" width="8" x="61.8628" y="67.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="65" x2="65" y1="67.4883" y2="1244.2207"/></g><g><title>MvcController</title><rect fill="#000000" fill-opacity="0.00000" height="1176.7324" width="8" x="183.0439" y="67.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="186.7256" x2="186.7256" y1="67.4883" y2="1244.2207"/></g><g><title>ConcertEventStore</title><rect fill="#000000" fill-opacity="0.00000" height="1176.7324" width="8" x="308.5488" y="67.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="312.3623" x2="312.3623" y1="67.4883" y2="1244.2207"/></g><g><title>Projection Updater</title><rect fill="#000000" fill-opacity="0.00000" height="1176.7324" width="8" x="528.4917" y="67.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="532.4336" x2="532.4336" y1="67.4883" y2="1244.2207"/></g><g><title>Concert Sales Projector</title><rect fill="#000000" fill-opacity="0.00000" height="1176.7324" width="8" x="839.9487" y="67.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="843.5063" x2="843.5063" y1="67.4883" y2="1244.2207"/></g><g><title>ConcertSalesProjectionRepository</title><rect fill="#000000" fill-opacity="0.00000" height="1176.7324" width="8" x="1051.9702" y="67.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1055.3911" x2="1055.3911" y1="67.4883" y2="1244.2207"/></g><g><title>ProjectionMetadataRepository</title><rect fill="#000000" fill-opacity="0.00000" height="1176.7324" width="8" x="1282.7144" y="67.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1286.5493" x2="1286.5493" y1="67.4883" y2="1244.2207"/></g><g class="participant participant-head" data-participant="SpringAppConfig"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115.7256" x="5" y="64.5352">SpringAppConfig</text><ellipse cx="65.8628" cy="35" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="61.8628,23,67.8628,18,65.8628,23,67.8628,28,61.8628,23" style="stroke:#181818;stroke-width:1;"/></g><g class="participant participant-tail" data-participant="SpringAppConfig"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115.7256" x="5" y="1256.7559">SpringAppConfig</text><ellipse cx="65.8628" cy="1275.709" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="61.8628,1263.709,67.8628,1258.709,65.8628,1263.709,67.8628,1268.709,61.8628,1263.709" style="stroke:#181818;stroke-width:1;"/></g><g class="participant participant-head" data-participant="MvcController"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94.6367" x="136.7256" y="64.5352">MvcController</text><path d="M166.5439,23 L166.5439,47 M166.5439,35 L183.5439,35" fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="195.5439" cy="35" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="MvcController"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94.6367" x="136.7256" y="1256.7559">MvcController</text><path d="M166.5439,1263.709 L166.5439,1287.709 M166.5439,1275.709 L183.5439,1275.709" fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="195.5439" cy="1275.709" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="ConcertEventStore"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124.373" x="247.3623" y="64.5352">ConcertEventStore</text><path d="M294.5488,15 C294.5488,5 312.5488,5 312.5488,5 C312.5488,5 330.5488,5 330.5488,15 L330.5488,41 C330.5488,51 312.5488,51 312.5488,51 C312.5488,51 294.5488,51 294.5488,41 L294.5488,15" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M294.5488,15 C294.5488,25 312.5488,25 312.5488,25 C312.5488,25 330.5488,25 330.5488,15" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="ConcertEventStore"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124.373" x="247.3623" y="1256.7559">ConcertEventStore</text><path d="M294.5488,1269.709 C294.5488,1259.709 312.5488,1259.709 312.5488,1259.709 C312.5488,1259.709 330.5488,1259.709 330.5488,1269.709 L330.5488,1295.709 C330.5488,1305.709 312.5488,1305.709 312.5488,1305.709 C312.5488,1305.709 294.5488,1305.709 294.5488,1295.709 L294.5488,1269.709" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M294.5488,1269.709 C294.5488,1279.709 312.5488,1279.709 312.5488,1279.709 C312.5488,1279.709 330.5488,1279.709 330.5488,1269.709" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="ProjectionUpdater"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="140.1162" x="462.4336" y="19.5117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126.1162" x="469.4336" y="40.0469">Projection Updater</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.7412" x="492.6211" y="56.5352">&#171;txn script&#187;</text></g><g class="participant participant-tail" data-participant="ProjectionUpdater"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="140.1162" x="462.4336" y="1243.2207"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126.1162" x="469.4336" y="1263.7559">Projection Updater</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.7412" x="492.6211" y="1280.2441">&#171;txn script&#187;</text></g><g class="participant participant-head" data-participant="ConcertSalesProjector"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="170.8848" x="758.5063" y="19.5117"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156.8848" x="765.5063" y="40.0469">Concert Sales Projector</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65.6182" x="811.1396" y="56.5352">&#171;domain&#187;</text></g><g class="participant participant-tail" data-participant="ConcertSalesProjector"><rect fill="#E2E2F0" height="46.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="170.8848" x="758.5063" y="1243.2207"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156.8848" x="765.5063" y="1263.7559">Concert Sales Projector</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65.6182" x="811.1396" y="1280.2441">&#171;domain&#187;</text></g><g class="participant participant-head" data-participant="ConcertSalesProjectionRepository"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="227.1582" x="939.3911" y="64.5352">ConcertSalesProjectionRepository</text><path d="M1037.9702,15 C1037.9702,5 1055.9702,5 1055.9702,5 C1055.9702,5 1073.9702,5 1073.9702,15 L1073.9702,41 C1073.9702,51 1055.9702,51 1055.9702,51 C1055.9702,51 1037.9702,51 1037.9702,41 L1037.9702,15" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1037.9702,15 C1037.9702,25 1055.9702,25 1055.9702,25 C1055.9702,25 1073.9702,25 1073.9702,15" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="ConcertSalesProjectionRepository"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="227.1582" x="939.3911" y="1256.7559">ConcertSalesProjectionRepository</text><path d="M1037.9702,1269.709 C1037.9702,1259.709 1055.9702,1259.709 1055.9702,1259.709 C1055.9702,1259.709 1073.9702,1259.709 1073.9702,1269.709 L1073.9702,1295.709 C1073.9702,1305.709 1055.9702,1305.709 1055.9702,1305.709 C1055.9702,1305.709 1037.9702,1305.709 1037.9702,1295.709 L1037.9702,1269.709" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1037.9702,1269.709 C1037.9702,1279.709 1055.9702,1279.709 1055.9702,1279.709 C1055.9702,1279.709 1073.9702,1279.709 1073.9702,1269.709" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="ProjectionMetadataRepository"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="202.3301" x="1182.5493" y="64.5352">ProjectionMetadataRepository</text><path d="M1268.7144,15 C1268.7144,5 1286.7144,5 1286.7144,5 C1286.7144,5 1304.7144,5 1304.7144,15 L1304.7144,41 C1304.7144,51 1286.7144,51 1286.7144,51 C1286.7144,51 1268.7144,51 1268.7144,41 L1268.7144,15" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1268.7144,15 C1268.7144,25 1286.7144,25 1286.7144,25 C1286.7144,25 1304.7144,25 1304.7144,15" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="ProjectionMetadataRepository"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="202.3301" x="1182.5493" y="1256.7559">ProjectionMetadataRepository</text><path d="M1268.7144,1269.709 C1268.7144,1259.709 1286.7144,1259.709 1286.7144,1259.709 C1286.7144,1259.709 1304.7144,1259.709 1304.7144,1269.709 L1304.7144,1295.709 C1304.7144,1305.709 1286.7144,1305.709 1286.7144,1305.709 C1286.7144,1305.709 1268.7144,1305.709 1268.7144,1295.709 L1268.7144,1269.709" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1268.7144,1269.709 C1268.7144,1279.709 1286.7144,1279.709 1286.7144,1279.709 C1286.7144,1279.709 1304.7144,1279.709 1304.7144,1269.709" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g><title>ConcertEventStore</title><rect fill="#FFFFFF" height="1093.1113" style="stroke:#181818;stroke-width:1;" width="10" x="307.5488" y="142.1094"/></g><g><title>Projection Updater</title><rect fill="#FFFFFF" height="929.9375" style="stroke:#181818;stroke-width:1;" width="10" x="527.4917" y="305.2832"/></g><g><title>Concert Sales Projector</title><rect fill="#FFFFFF" height="1034.4902" style="stroke:#181818;stroke-width:1;" width="10" x="838.9487" y="200.7305"/></g><g><title>ConcertSalesProjectionRepository</title><rect fill="#FFFFFF" height="1157.7324" style="stroke:#181818;stroke-width:1;" width="10" x="1050.9702" y="77.4883"/></g><g><title>ProjectionMetadataRepository</title><rect fill="#FFFFFF" height="1157.7324" style="stroke:#181818;stroke-width:1;" width="10" x="1281.7144" y="77.4883"/></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1410.8794" x="0" y="98.1436"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1410.8794" y1="98.1436" y2="98.1436"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1410.8794" y1="101.1436" y2="101.1436"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="102.6133" x="654.1331" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="84.3286" x="660.1331" y="104.0566">Initialization</text><g class="message" data-participant-1="SpringAppConfig" data-participant-2="ConcertEventStore"><polygon fill="#181818" points="295.5488,138.1094,305.5488,142.1094,295.5488,146.1094,299.5488,142.1094" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="65.8628" x2="301.5488" y1="142.1094" y2="142.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8.5757" x="72.8628" y="137.3672">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67.9453" x="85.4385" y="137.3672">create new</text></g><g class="message" data-participant-1="ConcertEventStore" data-participant-2="SpringAppConfig"><polygon fill="#181818" points="76.8628,167.4199,66.8628,171.4199,76.8628,175.4199,72.8628,171.4199" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="70.8628" x2="306.5488" y1="171.4199" y2="171.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8.5757" x="82.8628" y="166.6777">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66.5552" x="95.4385" y="166.6777">eventStore</text></g><g class="message" data-participant-1="SpringAppConfig" data-participant-2="ConcertSalesProjector"><polygon fill="#181818" points="826.9487,196.7305,836.9487,200.7305,826.9487,204.7305,830.9487,200.7305" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="65.8628" x2="832.9487" y1="200.7305" y2="200.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8.5757" x="72.8628" y="195.9883">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67.9453" x="85.4385" y="195.9883">create new</text></g><g class="message" data-participant-1="ConcertSalesProjector" data-participant-2="SpringAppConfig"><polygon fill="#181818" points="76.8628,226.041,66.8628,230.041,76.8628,234.041,72.8628,230.041" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="70.8628" x2="837.9487" y1="230.041" y2="230.041"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8.5757" x="82.8628" y="225.2988">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.1162" x="95.4385" y="225.2988">concertSalesProjector</text></g><g class="message" data-participant-1="SpringAppConfig" data-participant-2="ProjectionUpdater"><polygon fill="#181818" points="515.4917,301.2832,525.4917,305.2832,515.4917,309.2832,519.4917,305.2832" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="65.8628" x2="521.4917" y1="305.2832" y2="305.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8.5757" x="72.8628" y="277.5752">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181.9619" x="85.4385" y="254.6094">create(concertSalesProjector,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70.6685" x="101.8916" y="269.9199">eventStore,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129.9111" x="101.8916" y="285.2305">metadataRepository,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212.8242" x="101.8916" y="300.541">concertSalesProjectionRepository)</text></g><g class="message" data-participant-1="ProjectionUpdater" data-participant-2="ProjectionMetadataRepository"><polygon fill="#181818" points="1269.7144,330.5938,1279.7144,334.5938,1269.7144,338.5938,1273.7144,334.5938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="537.4917" x2="1275.7144" y1="334.5938" y2="334.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8.5757" x="544.4917" y="329.8516">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="261.752" x="557.0674" y="329.8516">existsByProjectionName(projection name)</text></g><g class="message" data-participant-1="ProjectionMetadataRepository" data-participant-2="ProjectionUpdater"><polygon fill="#181818" points="548.4917,359.9043,538.4917,363.9043,548.4917,367.9043,544.4917,363.9043" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="542.4917" x2="1280.7144" y1="363.9043" y2="363.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8.5757" x="554.4917" y="359.1621">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42.5737" x="567.0674" y="359.1621">exists?</text></g><path d="M452.4336,378.9043 L514.5723,378.9043 L514.5723,386.2148 L504.5723,396.2148 L452.4336,396.2148 L452.4336,378.9043" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:1.5;" width="948.4458" x="452.4336" y="378.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="467.4336" y="392.4727">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="319.0107" x="529.5723" y="391.5391">[if metadata does not exist for projection (exists=false)]</text><g class="message" data-participant-1="ProjectionUpdater" data-participant-2="ProjectionMetadataRepository"><polygon fill="#181818" points="1269.7144,413.5254,1279.7144,417.5254,1269.7144,421.5254,1273.7144,417.5254" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="537.4917" x2="1275.7144" y1="417.5254" y2="417.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8.5757" x="544.4917" y="412.7832">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="223.3042" x="557.0674" y="412.7832">saveIfNotExists(projection name, 0)</text></g><g class="message" data-participant-1="ProjectionUpdater" data-participant-2="ProjectionMetadataRepository"><polygon fill="#181818" points="1269.7144,465.1465,1279.7144,469.1465,1269.7144,473.1465,1273.7144,469.1465" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="537.4917" x2="1275.7144" y1="469.1465" y2="469.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8.5757" x="544.4917" y="456.749">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204.5723" x="557.0674" y="449.0938">findLastGlobalEventSequenceFor</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84.3984" x="557.0674" y="464.4043">(projectionId)</text></g><g class="message" data-participant-1="ProjectionMetadataRepository" data-participant-2="ProjectionUpdater"><polygon fill="#181818" points="548.4917,494.457,538.4917,498.457,548.4917,502.457,544.4917,498.457" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="542.4917" x2="1280.7144" y1="498.457" y2="498.457"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1514" x="554.4917" y="493.7148">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.3364" x="575.6431" y="493.7148">lastGlobalEventSequence</text></g><g class="message" data-participant-1="ProjectionUpdater" data-participant-2="ConcertEventStore"><polygon fill="#181818" points="328.5488,539.0781,318.5488,543.0781,328.5488,547.0781,324.5488,543.0781" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="322.5488" x2="526.4917" y1="543.0781" y2="543.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1514" x="334.5488" y="530.6807">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86.4424" x="355.7002" y="523.0254">allEventsAfter</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164.7915" x="355.7002" y="538.3359">(lastGlobalEventSequence)</text></g><g class="message" data-participant-1="ConcertEventStore" data-participant-2="ProjectionUpdater"><polygon fill="#181818" points="515.4917,583.6992,525.4917,587.6992,515.4917,591.6992,519.4917,587.6992" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="317.5488" x2="521.4917" y1="587.6992" y2="587.6992"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1514" x="324.5488" y="575.3018">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98.5537" x="345.7002" y="567.6465">Stream&lt;event&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108.2529" x="345.7002" y="582.957">(might be empty)</text></g><path d="M430,600.6992 L430,625.6992 L633,625.6992 L633,610.6992 L623,600.6992 L430,600.6992" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M623,600.6992 L623,610.6992 L633,610.6992 L623,600.6992" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182.4697" x="436" y="618.2676">this is the "catch up" process</text><path d="M452.4336,638.0098 L514.5723,638.0098 L514.5723,645.3203 L504.5723,655.3203 L452.4336,655.3203 L452.4336,638.0098" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="193.1738" style="stroke:#000000;stroke-width:1.5;" width="948.4458" x="452.4336" y="638.0098"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="467.4336" y="651.5781">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="188.8799" x="529.5723" y="650.6445">[if Stream&lt;event&gt; is NOT empty]</text><g class="message" data-participant-1="ProjectionUpdater" data-participant-2="ConcertSalesProjectionRepository"><polygon fill="#181818" points="1038.9702,672.6309,1048.9702,676.6309,1038.9702,680.6309,1042.9702,676.6309" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="537.4917" x2="1044.9702" y1="676.6309" y2="676.6309"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1514" x="544.4917" y="671.8887">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84.8936" x="565.6431" y="671.8887">loadAllRows()</text></g><g class="message" data-participant-1="ConcertSalesProjectionRepository" data-participant-2="ProjectionUpdater"><polygon fill="#181818" points="548.4917,701.9414,538.4917,705.9414,548.4917,709.9414,544.4917,705.9414" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="542.4917" x2="1049.9702" y1="705.9414" y2="705.9414"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1514" x="554.4917" y="701.1992">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96.8652" x="575.6431" y="701.1992">projectionRows</text></g><g class="message" data-participant-1="ProjectionUpdater" data-participant-2="ConcertSalesProjector"><polygon fill="#181818" points="826.9487,731.252,836.9487,735.252,826.9487,739.252,830.9487,735.252" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="537.4917" x2="832.9487" y1="735.252" y2="735.252"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1514" x="544.4917" y="730.5098">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="256.3057" x="565.6431" y="730.5098">project(projectionRows, Stream&lt;event&gt;)</text></g><g class="message" data-participant-1="ConcertSalesProjector" data-participant-2="ProjectionUpdater"><polygon fill="#181818" points="548.4917,760.5625,538.4917,764.5625,548.4917,768.5625,544.4917,764.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="542.4917" x2="837.9487" y1="764.5625" y2="764.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1514" x="554.4917" y="759.8203">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="250.1357" x="575.6431" y="759.8203">Stream&lt;projectionRows&gt; updatedRows</text></g><g class="message" data-participant-1="ProjectionUpdater" data-participant-2="ConcertSalesProjectionRepository"><polygon fill="#181818" points="1038.9702,789.873,1048.9702,793.873,1038.9702,797.873,1042.9702,793.873" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="537.4917" x2="1044.9702" y1="793.873" y2="793.873"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1514" x="544.4917" y="789.1309">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120.98" x="565.6431" y="789.1309">save(updatedRows)</text></g><g class="message" data-participant-1="ProjectionUpdater" data-participant-2="ProjectionMetadataRepository"><polygon fill="#181818" points="1269.7144,819.1836,1279.7144,823.1836,1269.7144,827.1836,1273.7144,823.1836" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="537.4917" x2="1275.7144" y1="823.1836" y2="823.1836"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1514" x="544.4917" y="818.4414">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192.5688" x="565.6431" y="818.4414">save(lastGlobalEventSequence)</text></g><g class="message" data-participant-1="ProjectionUpdater" data-participant-2="ConcertEventStore"><polygon fill="#181818" points="328.5488,870.8047,318.5488,874.8047,328.5488,878.8047,324.5488,874.8047" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="322.5488" x2="526.4917" y1="874.8047" y2="874.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1514" x="334.5488" y="862.4072">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60.6646" x="355.7002" y="854.752">subscribe</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.4463" x="355.7002" y="870.0625">(projectionUpdater)</text></g><g class="message" data-participant-1="ConcertEventStore" data-participant-2="ProjectionUpdater"><polygon fill="#181818" points="515.4917,900.1152,525.4917,904.1152,515.4917,908.1152,519.4917,904.1152" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="317.5488" x2="521.4917" y1="904.1152" y2="904.1152"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1514" x="324.5488" y="899.373">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4.1133" x="345.7002" y="899.373">&#160;</text></g><g class="message" data-participant-1="ProjectionUpdater" data-participant-2="SpringAppConfig"><polygon fill="#181818" points="76.8628,929.4258,66.8628,933.4258,76.8628,937.4258,72.8628,933.4258" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="70.8628" x2="526.4917" y1="933.4258" y2="933.4258"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1514" x="82.8628" y="928.6836">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113.9912" x="104.0142" y="928.6836">projectionUpdater</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1410.8794" x="0" y="962.0811"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1410.8794" y1="962.0811" y2="962.0811"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1410.8794" y1="965.0811" y2="965.0811"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2;" width="169.1494" x="620.865" y="951.4258"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="150.8647" x="626.865" y="967.9941">Viewing the Projection</text><g class="message" data-participant-1="MvcController" data-participant-2="ProjectionUpdater"><polygon fill="#181818" points="515.4917,1002.0469,525.4917,1006.0469,515.4917,1010.0469,519.4917,1006.0469" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="187.0439" x2="521.4917" y1="1006.0469" y2="1006.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1514" x="194.0439" y="1001.3047">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.252" x="215.1953" y="1001.3047">allProjectedSummaries()</text></g><g class="message" data-participant-1="ProjectionUpdater" data-participant-2="ProjectionMetadataRepository"><polygon fill="#181818" points="1269.7144,1031.3574,1279.7144,1035.3574,1269.7144,1039.3574,1273.7144,1035.3574" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="537.4917" x2="1275.7144" y1="1035.3574" y2="1035.3574"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1514" x="544.4917" y="1030.6152">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="288.9707" x="565.6431" y="1030.6152">findLastGlobalEventSequenceFor(projectionId)</text></g><g class="message" data-participant-1="ProjectionMetadataRepository" data-participant-2="ProjectionUpdater"><polygon fill="#181818" points="548.4917,1060.668,538.4917,1064.668,548.4917,1068.668,544.4917,1064.668" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="542.4917" x2="1280.7144" y1="1064.668" y2="1064.668"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1514" x="554.4917" y="1059.9258">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.3364" x="575.6431" y="1059.9258">lastGlobalEventSequence</text></g><g class="message" data-participant-1="ProjectionUpdater" data-participant-2="ConcertSalesProjectionRepository"><polygon fill="#181818" points="1038.9702,1089.9785,1048.9702,1093.9785,1038.9702,1097.9785,1042.9702,1093.9785" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="537.4917" x2="1044.9702" y1="1093.9785" y2="1093.9785"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1514" x="544.4917" y="1089.2363">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.2373" x="565.6431" y="1089.2363">load Projection</text></g><g class="message" data-participant-1="ConcertSalesProjectionRepository" data-participant-2="ProjectionUpdater"><polygon fill="#181818" points="548.4917,1119.2891,538.4917,1123.2891,548.4917,1127.2891,544.4917,1123.2891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="542.4917" x2="1049.9702" y1="1123.2891" y2="1123.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1514" x="554.4917" y="1118.5469">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96.8652" x="575.6431" y="1118.5469">projectionRows</text></g><path d="M452.4336,1138.2891 L514.5723,1138.2891 L514.5723,1145.5996 L504.5723,1155.5996 L452.4336,1155.5996 L452.4336,1138.2891" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="59.6211" style="stroke:#000000;stroke-width:1.5;" width="337.2603" x="452.4336" y="1138.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="467.4336" y="1151.8574">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="255.1216" x="529.5723" y="1150.9238">[if new events were loaded from event store]</text><g class="message" data-participant-1="ProjectionUpdater" data-participant-2="ProjectionUpdater"><line style="stroke:#181818;stroke-width:1;" x1="537.4917" x2="579.4917" y1="1176.9102" y2="1176.9102"/><line style="stroke:#181818;stroke-width:1;" x1="579.4917" x2="579.4917" y1="1176.9102" y2="1189.9102"/><line style="stroke:#181818;stroke-width:1;" x1="538.4917" x2="579.4917" y1="1189.9102" y2="1189.9102"/><polygon fill="#181818" points="548.4917,1185.9102,538.4917,1189.9102,548.4917,1193.9102,544.4917,1189.9102" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1514" x="544.4917" y="1172.168">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128.9019" x="565.6431" y="1172.168">catch up (see above)</text></g><g class="message" data-participant-1="ConcertSalesProjector" data-participant-2="MvcController"><polygon fill="#181818" points="198.0439,1222.2207,188.0439,1226.2207,198.0439,1230.2207,194.0439,1226.2207" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="192.0439" x2="837.9487" y1="1226.2207" y2="1226.2207"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1514" x="204.0439" y="1221.4785">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170.9487" x="225.1953" y="1221.4785">List&lt;ProjectedSummaries&gt;</text></g><!--SRC=[nLR1Rjim3BtxAuXUvW3jkdEGPEYARYZGTaEpxTIBBDE91bdo93bfz_MZRBUsOpbfkm8BV0b5FbBa8wbtQ-SAEpqzBIHJhipbUwxpKuk_IrGSJrB1LeRbKSHAfrMP9sYYY6lbZ9QmB8nGgxEYEDSg4wieqQLAcNc0wmq_htKawQVCiOHP199nDEvYWyejdJOO5SmumKL1hk6RqR-GEw7LZu9Cq02pSDHAeH7VgTdCtIkmt8Z2BHP7FPJ6nv99j8sjhf6Q4wYEuEdCmwKwPq9vgDrOkpWKmoqMsWgoUcWrszDhTCoBErhHV0wNIZZ1fFZ3gclCvvHDqj_GPVORFsaT36Qd4d2o62Px2joWHrEu7K1tQZAGm0d1xNYO0hOMuzxxPTWRGLyr2jSn60aF0WI26Z3iCQ0u275yfu1-xKKRGJweL7F03vHf4gfx4qeqf7yluY4zg0JtmZhxwQ7Lkc4vnaNRCeh-Jw9zA5LA0ucfiJz6J3eGsTET8TNKF4gxMW4oAah7NroRpJCcBJdsINd5lIpRu6Lsezr5XRPxeMFuC8bGfQz9MIPKUiMi-o9rmcJDyMRMVVQpeEFhCdrTvcGOFXnje4kPh0tjMLPDktW4S3BIgO6Gbevediyg9Yy8CHUhjOC40VF24IsfdWXwGo45ZDrQMA3FhH6EE7Dy3MLnvAlEqTf7WlHSUFMRhzzh-74M71fhb4lDqZCfR_NMnZMT3jcCfQ2jgmTxKKowDO_xCCVzQuz6s4okyShqOHUKO7-UlZZKdVJvHeexMF_KaUCy7Et50BjjcVZ5dM2lrngRPrCwv2wq6WOUgeNyK-2Mz2f6TzuNVZ7tNYuZEuCQj95YkYppd1c1dfvlFex-qp0wq8yTDz4RTMCpG-XPK6zR2rkaqdjlc49cT5xBmLRlZMUGk5tmpS22s282IsZArOJTyyBeaM0ALxI4PiEABwA_]--></g></svg>